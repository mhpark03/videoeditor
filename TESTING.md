# 비디오 에디터 테스트 가이드

이 문서는 Kiosk Video Editor의 모든 기능을 체계적으로 테스트하는 방법을 제공합니다.

## 📋 사전 준비

### 1. 환경 설정

#### Windows 환경 (필수)
```bash
# Node.js 설치 확인
node -v  # v18 이상 권장

# FFmpeg 설치 확인
ffmpeg -version

# 프로젝트 의존성 설치
cd video-editor
npm install
```

#### 환경 변수 설정 (.env 파일)
```bash
# video-editor/.env
RUNWAY_API_KEY=your_runway_key
GOOGLE_AI_API_KEY=your_google_ai_key
GOOGLE_TTS_API_KEY=your_tts_key
DB_PASSWORD=aioztesting
```

#### 백엔드 서버 실행 (API 연동 테스트용)
```bash
cd backend
SPRING_PROFILES_ACTIVE=local ./gradlew bootRun
# → http://localhost:8080 에서 실행됨
```

### 2. 테스트 샘플 준비

#### 샘플 비디오 생성 (FFmpeg 사용)
```bash
# 5초 테스트 비디오 생성
ffmpeg -f lavfi -i testsrc=duration=5:size=1920x1080:rate=30 test_video.mp4

# 오디오 포함 비디오
ffmpeg -f lavfi -i testsrc=duration=5:size=1920x1080:rate=30 \
       -f lavfi -i sine=frequency=1000:duration=5 test_av.mp4

# 10초 샘플 비디오
ffmpeg -f lavfi -i testsrc=duration=10:size=1280x720:rate=30 test_10s.mp4
```

#### 샘플 오디오 준비
- MP3, WAV, AAC 형식 파일 준비
- 또는 무료 다운로드: https://freesound.org/

---

## 🧪 테스트 시나리오

### Phase 1: 기본 실행 테스트

#### 1.1 앱 실행
```bash
npm start
```

**체크리스트:**
- [ ] 앱이 정상적으로 실행됨
- [ ] UI가 올바르게 렌더링됨
- [ ] 좌측 사이드바의 모든 메뉴가 표시됨
- [ ] DevTools에 에러가 없음 (F12로 확인)

#### 1.2 FFmpeg 연동 확인
- [ ] 앱 로그에 FFmpeg 경로가 출력됨
- [ ] 에러 메시지가 없음

---

### Phase 2: 기본 비디오 편집 기능

#### 2.1 영상 가져오기
**테스트:**
1. "영상 가져오기" 클릭
2. `test_video.mp4` 선택
3. 미리보기 화면에 로드 확인

**체크리스트:**
- [ ] 파일 선택 대화상자가 열림
- [ ] 비디오가 미리보기에 표시됨
- [ ] 재생 컨트롤이 작동함 (재생/일시정지)
- [ ] 비디오 정보 표시 (길이, 해상도)

**지원 포맷 테스트:**
- [ ] MP4
- [ ] AVI
- [ ] MOV
- [ ] MKV
- [ ] WebM

#### 2.2 영상 자르기
**테스트:**
1. 비디오 로드
2. "영상 자르기" 선택
3. 시작 시간: 1초
4. 지속 시간: 3초
5. "영상 자르기" 버튼 클릭
6. 저장 위치 선택

**체크리스트:**
- [ ] 시간 입력 필드가 작동함
- [ ] FFmpeg 명령어 실행됨
- [ ] 진행 상태 표시됨
- [ ] 잘린 비디오가 저장됨
- [ ] 출력 파일이 3초 길이임
- [ ] 새 비디오가 자동으로 로드됨

**엣지 케이스:**
- [ ] 시작 시간 = 0
- [ ] 지속 시간 > 비디오 길이 (에러 처리 확인)
- [ ] 음수 값 입력 (유효성 검증 확인)

#### 2.3 영상 병합
**테스트:**
1. "영상 병합" 선택
2. "+ 영상 추가" 버튼으로 2개 비디오 추가
3. 트랜지션: "크로스페이드" 선택
4. 지속 시간: 1초
5. "영상 병합" 버튼 클릭

**체크리스트:**
- [ ] 영상 목록에 추가됨
- [ ] 목록에서 제거 가능 (X 버튼)
- [ ] 트랜지션 선택 작동
- [ ] 병합된 비디오가 생성됨
- [ ] 트랜지션 효과가 적용됨

**트랜지션 테스트:**
- [ ] 없음 (이어붙이기) - 즉시 전환
- [ ] 크로스페이드 - 부드러운 전환

---

### Phase 3: 오디오 편집 기능

#### 3.1 배경음악 추가
**테스트:**
1. 비디오 로드
2. "배경음악 추가" 선택
3. "오디오 선택" 버튼으로 MP3 파일 선택
4. 볼륨 슬라이더: 1.0
5. "오디오 추가" 버튼 클릭

**체크리스트:**
- [ ] 오디오 파일 선택됨
- [ ] 볼륨 슬라이더 작동 (0~2)
- [ ] 배경음악이 추가됨
- [ ] 원본 오디오와 믹싱됨
- [ ] 볼륨 조절이 반영됨

**볼륨 테스트:**
- [ ] 0 (무음)
- [ ] 0.5 (절반)
- [ ] 1.0 (기본)
- [ ] 2.0 (2배 증폭)

#### 3.2 오디오 추출
**테스트:**
1. 오디오가 있는 비디오 로드 (`test_av.mp4`)
2. "오디오 추출" 선택
3. "오디오 추출" 버튼 클릭
4. 저장 위치 선택 (`.mp3` 또는 `.wav`)

**체크리스트:**
- [ ] 오디오 파일이 생성됨
- [ ] 파일 크기가 적절함
- [ ] 오디오 재생 가능
- [ ] 길이가 원본과 동일함

#### 3.3 볼륨 조절
**테스트:**
1. 비디오 로드
2. "볼륨 조절" 선택
3. 볼륨 슬라이더: 1.5 (50% 증폭)
4. "볼륨 조절" 버튼 클릭

**체크리스트:**
- [ ] 볼륨이 증폭됨
- [ ] 왜곡 없이 재생됨
- [ ] 0.5 (감소) 테스트
- [ ] 2.0 (2배 증폭) 테스트

---

### Phase 4: 고급 효과

#### 4.1 필터 적용
**테스트 시나리오:**

**밝기 조정:**
1. 비디오 로드
2. "필터 적용" 선택
3. 밝기 슬라이더: 0.2
4. "필터 적용" 버튼 클릭

**체크리스트:**
- [ ] 밝기 증가 확인
- [ ] 밝기 감소 (-0.2) 테스트
- [ ] 출력 비디오 품질 확인

**대비 조정:**
- [ ] 대비 +0.5 테스트
- [ ] 대비 -0.5 테스트

**채도 조정:**
- [ ] 채도 +0.5 (선명한 색)
- [ ] 채도 -1.0 (흑백)

**블러 효과:**
- [ ] 블러 강도: 5
- [ ] 블러 강도: 10

**샤픈 효과:**
- [ ] 샤픈 강도: 2
- [ ] 샤픈 강도: 5

#### 4.2 텍스트/자막 추가
**테스트:**
1. 비디오 로드
2. "텍스트/자막" 선택
3. 텍스트: "테스트 자막"
4. 위치: 중앙 (x, y)
5. 크기: 48
6. 색상: 흰색
7. 시작 시간: 1초
8. 지속 시간: 3초
9. "자막 추가" 버튼 클릭

**체크리스트:**
- [ ] 자막이 표시됨
- [ ] 위치가 정확함
- [ ] 크기가 올바름
- [ ] 색상이 반영됨
- [ ] 시간 범위가 정확함

**위치 테스트:**
- [ ] 상단 왼쪽
- [ ] 상단 중앙
- [ ] 하단 중앙
- [ ] 커스텀 위치 (x, y 직접 입력)

#### 4.3 속도 조절
**테스트:**
1. 비디오 로드
2. "속도 조절" 선택
3. 속도: 2.0 (2배속)
4. "속도 조절" 버튼 클릭

**체크리스트:**
- [ ] 0.25x (슬로우모션)
- [ ] 0.5x (절반)
- [ ] 1.0x (기본)
- [ ] 2.0x (2배속)
- [ ] 4.0x (4배속)
- [ ] 오디오도 속도 조절됨

---

### Phase 5: AI 기능 테스트

#### 5.1 TTS (음성 생성)

**사전 요구사항:**
- `GOOGLE_TTS_API_KEY` 환경 변수 설정

**테스트:**
1. "TTS 음성 생성" 선택
2. 텍스트 입력: "안녕하세요. 키오스크 관리 시스템입니다."
3. 제목: "환영 메시지"
4. 언어: 한국어 (ko-KR)
5. 음성: ko-KR-Standard-A
6. 속도: 1.0
7. 피치: 0
8. "🎵 음성 생성" 버튼 클릭

**체크리스트:**
- [ ] API 호출 성공
- [ ] MP3 파일 생성됨
- [ ] 임시 폴더에 저장 확인
- [ ] 오디오 재생 가능
- [ ] 백엔드 업로드 성공 (선택 시)

**다국어 테스트:**
- [ ] 한국어 (ko-KR)
- [ ] 영어 (en-US)
- [ ] 일본어 (ja-JP)

**음성 커스터마이징:**
- [ ] 속도 0.5x (느리게)
- [ ] 속도 2.0x (빠르게)
- [ ] 피치 -10 (낮은 톤)
- [ ] 피치 +10 (높은 톤)

**긴 텍스트 테스트:**
- [ ] 1000자 텍스트
- [ ] 5000자 텍스트 (최대)

#### 5.2 Imagen (이미지 생성)

**사전 요구사항:**
- `GOOGLE_AI_API_KEY` 환경 변수 설정

**테스트:**
1. "Imagen 이미지" 선택
2. 프롬프트: "A beautiful sunset over the ocean"
3. 제목: "Ocean Sunset"
4. "🎨 이미지 생성" 버튼 클릭

**체크리스트:**
- [ ] API 호출 성공
- [ ] 이미지 생성됨
- [ ] 미리보기 표시
- [ ] 임시 폴더에 저장
- [ ] 백엔드 업로드 성공 (선택 시)

**다양한 프롬프트 테스트:**
- [ ] 풍경 이미지
- [ ] 인물 이미지
- [ ] 추상적 개념

#### 5.3 Veo (비디오 생성)

**사전 요구사항:**
- `GOOGLE_AI_API_KEY` 환경 변수 설정

**테스트:**
1. "Veo 비디오" 선택
2. 프롬프트: "A cat playing with a ball"
3. 제목: "Cat Video"
4. 해상도: 720p
5. 길이: 8초
6. "🎬 비디오 생성" 버튼 클릭

**체크리스트:**
- [ ] API 호출 성공
- [ ] 생성 대기 시간 표시
- [ ] 폴링 메커니즘 작동
- [ ] 비디오 다운로드 성공
- [ ] 미리보기 재생 가능
- [ ] 백엔드 업로드 성공

**설정 테스트:**
- [ ] 720p 해상도
- [ ] 1080p 해상도
- [ ] 4초 길이
- [ ] 8초 길이

**주의:** Veo 생성은 시간이 오래 걸릴 수 있음 (1~5분)

#### 5.4 Runway (이미지 생성)

**사전 요구사항:**
- `RUNWAY_API_KEY` 환경 변수 설정

**테스트:**
1. "Runway 이미지" 선택
2. 프롬프트: "A futuristic city at night"
3. 제목: "Futuristic City"
4. "🚀 이미지 생성" 버튼 클릭

**체크리스트:**
- [ ] API 호출 성공
- [ ] 이미지 생성됨
- [ ] 임시 폴더에 저장
- [ ] 백엔드 업로드 성공

---

### Phase 6: 백엔드 API 연동 테스트

#### 6.1 백엔드 연결 확인
**사전 요구사항:**
- 백엔드 서버 실행 (`http://localhost:8080`)

**체크리스트:**
- [ ] `renderer/api.js`의 `API_BASE_URL` 확인
- [ ] 백엔드 서버 응답 확인 (`/api/videos`)
- [ ] CORS 설정 확인

#### 6.2 AI 콘텐츠 업로드
**API 엔드포인트:** `POST /api/ai/upload`

**테스트:**
1. TTS로 음성 생성
2. "백엔드에 업로드" 체크박스 선택
3. 생성 완료 후 확인

**체크리스트:**
- [ ] TTS → 백엔드 업로드 (mediaType: AUDIO)
- [ ] Imagen → 백엔드 업로드 (mediaType: IMAGE)
- [ ] Veo → 백엔드 업로드 (mediaType: VIDEO)
- [ ] Runway → 백엔드 업로드 (mediaType: IMAGE)

**백엔드 확인:**
```bash
# 업로드된 콘텐츠 확인 (firstapp 대시보드)
http://localhost:5173/audios  # TTS 음성
http://localhost:5173/images  # Imagen, Runway 이미지
http://localhost:5173/videos  # Veo 비디오
```

**데이터베이스 확인:**
```sql
SELECT id, title, media_type, video_type, created_at
FROM videos
WHERE video_type = 'AI_GENERATED'
ORDER BY created_at DESC
LIMIT 10;
```

#### 6.3 비디오 다운로드
**테스트:**
1. 백엔드에서 비디오 목록 조회
2. 특정 비디오 다운로드 (presigned URL 사용)
3. 로컬에 저장

**체크리스트:**
- [ ] 비디오 목록 조회 API 작동
- [ ] Presigned URL 생성
- [ ] 다운로드 성공
- [ ] 파일 무결성 확인

#### 6.4 편집된 영상 업로드
**테스트:**
1. 비디오 편집 (자르기, 필터 등)
2. "백엔드에 업로드" 버튼 클릭
3. 제목, 설명 입력
4. 업로드

**체크리스트:**
- [ ] 업로드 진행률 표시
- [ ] S3에 저장 확인
- [ ] 데이터베이스에 기록 확인
- [ ] 대시보드에서 확인 가능

---

### Phase 7: 에러 처리 테스트

#### 7.1 FFmpeg 에러
**테스트:**
- [ ] FFmpeg 경로가 잘못된 경우
- [ ] 지원하지 않는 포맷 입력
- [ ] 손상된 비디오 파일

**기대 동작:**
- 명확한 에러 메시지 표시
- 앱이 크래시되지 않음

#### 7.2 API 에러
**테스트:**
- [ ] API 키가 없는 경우
- [ ] 잘못된 API 키
- [ ] 네트워크 연결 끊김
- [ ] 백엔드 서버가 중지된 경우

**기대 동작:**
- 사용자 친화적 에러 메시지
- 재시도 옵션 제공

#### 7.3 파일 시스템 에러
**테스트:**
- [ ] 쓰기 권한 없는 폴더에 저장 시도
- [ ] 디스크 공간 부족
- [ ] 파일이 이미 열려있는 경우

---

### Phase 8: 성능 테스트

#### 8.1 대용량 파일
**테스트:**
- [ ] 1GB 비디오 파일 처리
- [ ] 4K 해상도 비디오
- [ ] 30분 이상 영상

**측정:**
- 처리 시간
- 메모리 사용량
- CPU 사용률

#### 8.2 연속 작업
**테스트:**
1. 비디오 자르기
2. 필터 적용
3. 배경음악 추가
4. 자막 추가
5. 최종 출력

**체크리스트:**
- [ ] 각 단계가 정상 작동
- [ ] 메모리 누수 없음
- [ ] 앱이 느려지지 않음

---

### Phase 9: UI/UX 테스트

#### 9.1 반응성
**테스트:**
- [ ] 창 크기 조절 시 레이아웃 유지
- [ ] 버튼 클릭 반응
- [ ] 로딩 상태 표시

#### 9.2 사용성
**체크리스트:**
- [ ] 직관적인 메뉴 구조
- [ ] 명확한 버튼 레이블
- [ ] 유용한 툴팁
- [ ] 진행 상태 피드백

#### 9.3 접근성
- [ ] 키보드 단축키 작동
- [ ] 포커스 표시
- [ ] 화면 낭독기 호환성 (선택)

---

## 📊 테스트 결과 기록

### 테스트 환경
```
OS: Windows 10/11
Node.js: v18.x.x
FFmpeg: 6.x
날짜: YYYY-MM-DD
테스터: [이름]
```

### 결과 요약

#### 통과한 기능 (✅)
- 기본 비디오 편집
- 오디오 편집
- ...

#### 실패한 기능 (❌)
- [기능명]: [에러 메시지]
- [재현 단계]

#### 개선 필요 사항
- 성능 최적화
- UI 개선
- 에러 메시지 개선

---

## 🐛 버그 리포트 템플릿

```markdown
### 버그 제목
[간단한 설명]

### 재현 단계
1. ...
2. ...
3. ...

### 기대 동작
[예상했던 결과]

### 실제 동작
[실제로 일어난 일]

### 환경
- OS: Windows 10
- Node.js: v18.17.0
- FFmpeg: 6.0
- 앱 버전: 1.1.0

### 스크린샷/로그
[이미지 또는 콘솔 로그]
```

---

## 🚀 고급 테스트

### 통합 테스트 스크립트
```javascript
// test/integration.test.js
// TODO: Jest 또는 Mocha로 자동화 테스트 구현
```

### 자동화 테스트 (향후)
- [ ] E2E 테스트 (Playwright/Puppeteer)
- [ ] Unit 테스트 (Jest)
- [ ] API 테스트 (Supertest)

---

## 📚 참고 자료

- [README.md](./README.md) - 사용자 가이드
- [SETUP.md](./SETUP.md) - 설치 가이드
- [FFmpeg 문서](https://ffmpeg.org/documentation.html)
- [Electron 문서](https://www.electronjs.org/docs)

---

**테스트 완료 후:**
1. 모든 체크리스트 항목 확인
2. 발견된 버그 리포트 작성
3. 개선 사항 문서화
4. 다음 릴리스 계획 수립
